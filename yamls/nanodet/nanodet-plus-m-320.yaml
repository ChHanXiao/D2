# |   AP   |  AP50  |  AP75  |  APs  |  APm   |  APl   |
# |:------:|:------:|:------:|:-----:|:------:|:------:|
# | 27.027 | 41.690 | 28.042 | 8.060 | 27.622 | 45.112 |
MODEL:
  META_ARCHITECTURE: NanoDetPlus
  YML: yamls/nanodet/yml/nanodet-plus-m_320.yml
  WEIGHTS: work_dirs/weights/nanodet/nanodet-plus-m_320_checkpoint.pth
  PIXEL_MEAN: [103.53, 116.28, 123.675]
  PIXEL_STD: [57.375, 57.12, 58.395]
MODEL_EMA:
  ENABLED: False
  DECAY: 0.9998
SOLVER:
  OPTIM: AdamW
  BASE_LR: 0.001
  WEIGHT_DECAY: 0.05
  WEIGHT_DECAY_NORM: 0.0
  WEIGHT_DECAY_BIAS: 0.0
  LR_SCHEDULER_NAME: WarmupCosineLR
  WARMUP_ITERS: 500  # default 500
  MAX_ITER: 350000   # MAX_ITER = epoch*len(dataset)/IMS_PER_BATCH   ##epoch=300
  IMS_PER_BATCH: 96   # default 96
  DETACH_ITER: 12000   # 10 epoch
  CLIP_GRADIENTS:
    CLIP_TYPE: value
    CLIP_VALUE: 35.0
    ENABLED: True
INPUT: 
  SIZE: (320, 320)
  FORMAT: BGR
  TEST_PIPELINES:
  - - ResizeAffine
    - output_size:
      - 320
      - 320
  TRAIN_PIPELINES:
  - - RandomFlip
    - {}
  - - RandomBrightness
    - intensity_max: 1.4
      intensity_min: 0.6
  - - RandomContrast
    - intensity_max: 1.4
      intensity_min: 0.6
  - - RandomSaturation
    - intensity_max: 1.4
      intensity_min: 0.6
  - - RandomLighting
    - scale: 0.1
  - - ResizeAffine
    - output_size:
      - 320
      - 320
DATASETS:
  TRAIN: ("coco_2017_train",)
  TEST: ("coco_2017_val",)
DATALOADER:
  NUM_WORKERS: 8
OUTPUT_DIR: ./work_dirs/nanodet-plus-m-320
TEST:
  EVAL_PERIOD: 50000
